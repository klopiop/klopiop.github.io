<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
    <channel>
        <title>FRP on MII0&#39;s Blog</title>
        <link>https://mi0034.icu/tags/frp/</link>
        <description>Recent content in FRP on MII0&#39;s Blog</description>
        <generator>Hugo -- gohugo.io</generator>
        <language>zh-cn</language>
        <copyright>MII0&#39;s Blog</copyright>
        <lastBuildDate>Mon, 16 Sep 2024 00:00:00 +0000</lastBuildDate><atom:link href="https://mi0034.icu/tags/frp/index.xml" rel="self" type="application/rss+xml" /><item>
        <title>FRP内网穿透</title>
        <link>https://mi0034.icu/p/frp%E5%86%85%E7%BD%91%E7%A9%BF%E9%80%8F/</link>
        <pubDate>Mon, 16 Sep 2024 00:00:00 +0000</pubDate>
        
        <guid>https://mi0034.icu/p/frp%E5%86%85%E7%BD%91%E7%A9%BF%E9%80%8F/</guid>
        <description>&lt;img src="https://mi0034.icu/p/frp%E5%86%85%E7%BD%91%E7%A9%BF%E9%80%8F/cover.png" alt="Featured image of post FRP内网穿透" /&gt;&lt;h1 id=&#34;0x01-技术介绍&#34;&gt;0x01 技术介绍
&lt;/h1&gt;&lt;hr&gt;
&lt;h2 id=&#34;0x0101-项目介绍&#34;&gt;0x01.01 项目介绍
&lt;/h2&gt;&lt;hr&gt;
&lt;div style=&#34;display: flex; align-items: center; width: 100%;&#34;&gt;
   &lt;a href=&#34;https://github.com/fatedier/frp&#34; target=&#34;_blank&#34; class=&#34;vp-card&#34; style=&#34;background: rgb(255, 255, 255); width: 100%; text-decoration: none; color: inherit;&#34;&gt;
     &lt;img class=&#34;vp-card-logo&#34; src=&#34;https://github.githubassets.com/images/modules/logos_page/GitHub-Mark.png&#34; loading=&#34;lazy&#34; alt=&#34;Logo&#34; style=&#34;margin-right: 15px;&#34;&gt;
     &lt;div class=&#34;vp-card-content&#34;&gt;
       &lt;div class=&#34;vp-card-title&#34;&gt;FRP下载地址：&lt;/div&gt;
       &lt;div class=&#34;vp-card-links&#34;&gt;https://github.com/fatedier/frp&lt;/div&gt;
       &lt;div class=&#34;vp-card-desc&#34;&gt;&lt;b&gt;快速反向代理&lt;/b&gt;&lt;/div&gt;
     &lt;/div&gt;
   &lt;/a&gt;
 &lt;/div&gt;
 
 &lt;style&gt;
   .cards-container {
       display: flex;
       justify-content: center;  
     }
     
     .vp-card {
       margin-left: auto;
       margin-right: auto;
       min-height: 120px;  
       max-height: 120px;  
     }
     
   .vp-card {
     display: flex;
     align-items: center;  
     background: #ffffff;  
     width: 100%;
     max-width: 300px;
     border: 1px solid #eaeaea;  
     border-radius: 25px;  
     box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);  
     overflow: hidden;
     transition: transform 0.3s ease, box-shadow 0.3s ease;
     font-family: &#39;Arial&#39;, sans-serif;  
     position: relative;  
   }
   
   .vp-card:hover {
     transform: translateY(-3px);
     box-shadow: 0 6px 12px rgba(0, 0, 0, 0.2);  
   }
   
   .vp-card-logo {
     width: 50px;
     height: 50px;
     border-radius: 50%;  
     object-fit: cover;  
     margin-left: 25px
   }
   
   .vp-card-content {
     display: flex;
     flex-direction: column;
     padding: 16px;  
     flex-grow: 1;
     position: relative;  
   }
   
   .vp-card-content::before {
     content: &#39;&#39;;
     position: absolute;
     top: 0;
     bottom: 0;
     left: 10px;  
     border-left: 2px dashed #eaeaea;  
     z-index: 1;  
   }
   
   .vp-card-title {
     font-size: 2.0rem;  
     color: #1a0dab;  
     margin-bottom: 8px;  
     line-height: 1;  
     font-weight: bold;  
     background-image: linear-gradient(to right, #ff7e5f, #feb47b);  
     -webkit-background-clip: text;  
     background-clip: text;  
     color: transparent;  
     transition: transform 0.3s ease, box-shadow 0.3s ease, color 0.3s ease;  
   }
   
   .vp-card-links {
       font-size: 12px;  
       color: #5f6368;  
       margin-bottom: 8px;  
       line-height: 1.4;  
       text-decoration: none;  
       transition: color 0.3s ease;  
       white-space: nowrap;  
       overflow: hidden;  
       text-overflow: ellipsis;  
     }
   
   .vp-card-links:hover {
     color: #1a0dab;  
   }
   
   .vp-card-desc {
     font-size: 1.4rem;  
     color: #666;  
     line-height: 1.6;  
   }
   
   hr {
     border: 0;
     height: 1px;
     background-color: #eaeaea;  
     margin: 14px 0;  
   }
   
   @media (min-width: 600px) {
       .vp-card {
         flex: 1 1 250px;  
       }
     }
     
     @media (max-width: 599px) {
       .vp-card {
         flex: 1 1 150px;  
         max-width: 100%;  
       }
     }
   &lt;/style&gt;

&lt;p&gt;项目介绍：快速反向代理，帮助用户将 NAT 或防火墙后面的本地服务器暴露给 Internet&lt;/p&gt;
&lt;h2 id=&#34;0x0102-frp-隧道技术介绍&#34;&gt;0x01.02 FRP 隧道技术介绍
&lt;/h2&gt;&lt;hr&gt;
&lt;p&gt;| frp 是一个专注于内网穿透的高性能的反向代理应用，支持 TCP、UDP、HTTP、HTTPS 等多种协议，且支持 P2P 通信&lt;/p&gt;
&lt;p&gt;在 FRP 中，一个代理对应一个需要公开访问的内网服务。一个客户端可以同时配置多个代理，以满足不同的需求。&lt;/p&gt;
&lt;h1 id=&#34;0x02-环境文件准备&#34;&gt;0x02 环境&amp;amp;文件准备
&lt;/h1&gt;&lt;hr&gt;
&lt;p&gt;安装环境：Ubuntu Server 24.0LTS
FRP 版本： 最新&lt;/p&gt;
&lt;h2 id=&#34;0x0201-下载安装&#34;&gt;0x02.01 下载安装
&lt;/h2&gt;&lt;hr&gt;
&lt;h3 id=&#34;0x0201a-自动下载-git&#34;&gt;0x02.01.A 自动下载 git
&lt;/h3&gt;&lt;hr&gt;
&lt;p&gt;使用命令：&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;git clone https://gitclone.com/github.com/fatedier/frp.git
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;&lt;img src=&#34;https://mi0034.icu/p/frp%E5%86%85%E7%BD%91%E7%A9%BF%E9%80%8F/attachment/41ba2291ecbec63f9e509234f0a036ed.jpeg&#34;
	width=&#34;1616&#34;
	height=&#34;1206&#34;
	srcset=&#34;https://mi0034.icu/p/frp%E5%86%85%E7%BD%91%E7%A9%BF%E9%80%8F/attachment/41ba2291ecbec63f9e509234f0a036ed_hu8090329514649159794.jpeg 480w, https://mi0034.icu/p/frp%E5%86%85%E7%BD%91%E7%A9%BF%E9%80%8F/attachment/41ba2291ecbec63f9e509234f0a036ed_hu14641504630179656630.jpeg 1024w&#34;
	loading=&#34;lazy&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;133&#34;
		data-flex-basis=&#34;321px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;进入目录：
&lt;img src=&#34;https://mi0034.icu/p/frp%E5%86%85%E7%BD%91%E7%A9%BF%E9%80%8F/attachment/8740830342698f442fa0e3387f799dfd.jpeg&#34;
	width=&#34;1607&#34;
	height=&#34;1202&#34;
	srcset=&#34;https://mi0034.icu/p/frp%E5%86%85%E7%BD%91%E7%A9%BF%E9%80%8F/attachment/8740830342698f442fa0e3387f799dfd_hu8965502563275225439.jpeg 480w, https://mi0034.icu/p/frp%E5%86%85%E7%BD%91%E7%A9%BF%E9%80%8F/attachment/8740830342698f442fa0e3387f799dfd_hu12249774820000087469.jpeg 1024w&#34;
	loading=&#34;lazy&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;133&#34;
		data-flex-basis=&#34;320px&#34;
	
&gt;&lt;/p&gt;
&lt;h3 id=&#34;0x0201b-手动下载&#34;&gt;0x02.01.B 手动下载
&lt;/h3&gt;&lt;hr&gt;
&lt;p&gt;手动文件下载：
&lt;img src=&#34;https://mi0034.icu/p/frp%E5%86%85%E7%BD%91%E7%A9%BF%E9%80%8F/attachment/e9858142c01fcd9fdfa53451986eaacb.jpeg&#34;
	width=&#34;2530&#34;
	height=&#34;1184&#34;
	srcset=&#34;https://mi0034.icu/p/frp%E5%86%85%E7%BD%91%E7%A9%BF%E9%80%8F/attachment/e9858142c01fcd9fdfa53451986eaacb_hu17382559121512764302.jpeg 480w, https://mi0034.icu/p/frp%E5%86%85%E7%BD%91%E7%A9%BF%E9%80%8F/attachment/e9858142c01fcd9fdfa53451986eaacb_hu9827935730125883927.jpeg 1024w&#34;
	loading=&#34;lazy&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;213&#34;
		data-flex-basis=&#34;512px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;选择对应版本下载，解压，进入对应目录&lt;/p&gt;
&lt;p&gt;Wget:
Linux 下还可以用 wget 程序下载文件
使用命令：&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;wget https://github.com/fatedier/frp/releases/download/v0.60.0/frp_0.60.0_linux_amd64.tar.gz
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;&lt;img src=&#34;https://mi0034.icu/p/frp%E5%86%85%E7%BD%91%E7%A9%BF%E9%80%8F/attachment/bac3e067e81941d48d496113b98488c9.jpeg&#34;
	width=&#34;1611&#34;
	height=&#34;1199&#34;
	srcset=&#34;https://mi0034.icu/p/frp%E5%86%85%E7%BD%91%E7%A9%BF%E9%80%8F/attachment/bac3e067e81941d48d496113b98488c9_hu1970666543968698027.jpeg 480w, https://mi0034.icu/p/frp%E5%86%85%E7%BD%91%E7%A9%BF%E9%80%8F/attachment/bac3e067e81941d48d496113b98488c9_hu12161360893280925670.jpeg 1024w&#34;
	loading=&#34;lazy&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;134&#34;
		data-flex-basis=&#34;322px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;之后解压：
使用命令：&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;tar -zxvf 对应文件名.tar.gz 
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;之后进入对应目录
&lt;img src=&#34;https://mi0034.icu/p/frp%E5%86%85%E7%BD%91%E7%A9%BF%E9%80%8F/attachment/41f77f3eae593c22e273634925f9b09b.jpeg&#34;
	width=&#34;1615&#34;
	height=&#34;436&#34;
	srcset=&#34;https://mi0034.icu/p/frp%E5%86%85%E7%BD%91%E7%A9%BF%E9%80%8F/attachment/41f77f3eae593c22e273634925f9b09b_hu3809296441771033643.jpeg 480w, https://mi0034.icu/p/frp%E5%86%85%E7%BD%91%E7%A9%BF%E9%80%8F/attachment/41f77f3eae593c22e273634925f9b09b_hu18232319635006286247.jpeg 1024w&#34;
	loading=&#34;lazy&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;370&#34;
		data-flex-basis=&#34;888px&#34;
	
&gt;&lt;/p&gt;
&lt;h1 id=&#34;0x03-配置编辑服务运行&#34;&gt;0x03 配置编辑&amp;amp;服务运行
&lt;/h1&gt;&lt;hr&gt;
&lt;p&gt;文件目录结构：
| 主要就编辑两个配置文件&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://mi0034.icu/p/frp%E5%86%85%E7%BD%91%E7%A9%BF%E9%80%8F/attachment/d657cddfc8b5e955f0d5904165873b16.jpeg&#34;
	width=&#34;1613&#34;
	height=&#34;1196&#34;
	srcset=&#34;https://mi0034.icu/p/frp%E5%86%85%E7%BD%91%E7%A9%BF%E9%80%8F/attachment/d657cddfc8b5e955f0d5904165873b16_hu1290848668554391477.jpeg 480w, https://mi0034.icu/p/frp%E5%86%85%E7%BD%91%E7%A9%BF%E9%80%8F/attachment/d657cddfc8b5e955f0d5904165873b16_hu1385820365987386357.jpeg 1024w&#34;
	loading=&#34;lazy&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;134&#34;
		data-flex-basis=&#34;323px&#34;
	
&gt;&lt;/p&gt;
&lt;h2 id=&#34;0x0301-服务端一般为内网跳板机或者公网服务器&#34;&gt;0x03.01 服务端（一般为内网跳板机或者公网服务器）
&lt;/h2&gt;&lt;hr&gt;
&lt;p&gt;运行命令：
| 旧版配置文件名叫 frps.ini&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# 给运行权限&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;chmod +x frps
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;#运行&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;./frps -c ./frps.toml
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;配置实例：&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;6
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# frps.toml  &lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nv&#34;&gt;bindPort&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;m&#34;&gt;7000&lt;/span&gt; &lt;span class=&#34;c1&#34;&gt;# 服务端与客户端通信端口  &lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;transport.tls.force &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;true&lt;/span&gt; &lt;span class=&#34;c1&#34;&gt;# 服务端将只接受 TLS链接  &lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;auth.token &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;public&amp;#34;&lt;/span&gt; &lt;span class=&#34;c1&#34;&gt;# 身份验证令牌，frpc要与frps一致  &lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;&lt;img src=&#34;https://mi0034.icu/p/frp%E5%86%85%E7%BD%91%E7%A9%BF%E9%80%8F/attachment/0fcc30d996797a1cc3e3be5393974de9.jpeg&#34;
	width=&#34;1615&#34;
	height=&#34;1208&#34;
	srcset=&#34;https://mi0034.icu/p/frp%E5%86%85%E7%BD%91%E7%A9%BF%E9%80%8F/attachment/0fcc30d996797a1cc3e3be5393974de9_hu4257714533849046737.jpeg 480w, https://mi0034.icu/p/frp%E5%86%85%E7%BD%91%E7%A9%BF%E9%80%8F/attachment/0fcc30d996797a1cc3e3be5393974de9_hu4330824900091730428.jpeg 1024w&#34;
	loading=&#34;lazy&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;133&#34;
		data-flex-basis=&#34;320px&#34;
	
&gt;&lt;/p&gt;
&lt;h2 id=&#34;0x0302-客户端-一般配置在需要穿透的主机上&#34;&gt;0x03.02 客户端 (一般配置在需要穿透的主机上)
&lt;/h2&gt;&lt;hr&gt;
&lt;p&gt;运行命令：
| 旧版配置文件名叫 frpc.ini&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# 给运行权限&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;chmod +x frpc
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;#运行&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;./frpc -c ./frpc.toml
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;配置实例：&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;14
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;15
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;16
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;17
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;18
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;19
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;20
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# frpc.toml  &lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;transport.tls.enable &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;true&lt;/span&gt; &lt;span class=&#34;c1&#34;&gt;# 从 v0.50.0版本开始，transport.tls.enable的默认值为 true  &lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nv&#34;&gt;serverAddr&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;x.x.x.x&amp;#34;&lt;/span&gt;  &lt;span class=&#34;c1&#34;&gt;#自己的公网地址&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nv&#34;&gt;serverPort&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;m&#34;&gt;7000&lt;/span&gt; &lt;span class=&#34;c1&#34;&gt;# 公网服务端通信端口  &lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;auth.token &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;public&amp;#34;&lt;/span&gt; &lt;span class=&#34;c1&#34;&gt;# 令牌，与公网服务端保持一致  &lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;[[&lt;/span&gt;proxies&lt;span class=&#34;o&#34;&gt;]]&lt;/span&gt;  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nv&#34;&gt;name&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;ssh&amp;#34;&lt;/span&gt;  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nb&#34;&gt;type&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;tcp&amp;#34;&lt;/span&gt;  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nv&#34;&gt;localIP&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;127.0.0.1&amp;#34;&lt;/span&gt; &lt;span class=&#34;c1&#34;&gt;# 需要暴露的服务的IP  &lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nv&#34;&gt;localPort&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;m&#34;&gt;22&lt;/span&gt; &lt;span class=&#34;c1&#34;&gt;# 将本地22端口的服务暴露在公网的6666端口  &lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nv&#34;&gt;remotePort&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;m&#34;&gt;6666&lt;/span&gt; &lt;span class=&#34;c1&#34;&gt;# 暴露服务的公网入口  &lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;[[&lt;/span&gt;proxies&lt;span class=&#34;o&#34;&gt;]]&lt;/span&gt;  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nv&#34;&gt;name&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;web&amp;#34;&lt;/span&gt;  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nb&#34;&gt;type&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;tcp&amp;#34;&lt;/span&gt;  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nv&#34;&gt;localIP&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;127.0.0.1&amp;#34;&lt;/span&gt;  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nv&#34;&gt;localPort&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;m&#34;&gt;80&lt;/span&gt;  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nv&#34;&gt;remotePort&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;m&#34;&gt;8888&lt;/span&gt;  
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;h1 id=&#34;0x04-拓展_二层代理实操&#34;&gt;0x04 拓展_二层代理实操
&lt;/h1&gt;&lt;hr&gt;
&lt;h2 id=&#34;0x0401-环境准备&#34;&gt;0x04.01 环境准备
&lt;/h2&gt;&lt;hr&gt;
&lt;blockquote&gt;
&lt;p&gt;[!tip] 内网两台主机需要互通&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;实验环境：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;攻击机&lt;/li&gt;
&lt;li&gt;公网服务器&lt;/li&gt;
&lt;li&gt;内网靶机一（出网，已攻陷）192.168.31.200&lt;/li&gt;
&lt;li&gt;内网靶机二（不出网）192.168.31.6&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;实验流程：内网靶机二 22端口映射到内网靶机一 2222端口，最后出网到公网服务器 3559 端口，攻击机连接&lt;/p&gt;
&lt;h2 id=&#34;0x0402-实验过程&#34;&gt;0x04.02 实验过程
&lt;/h2&gt;&lt;hr&gt;
&lt;h3 id=&#34;0x0402a-配置&#34;&gt;0x04.02.A 配置
&lt;/h3&gt;&lt;p&gt;靶机一配置：
| 配置客户端连接公网服务器
&lt;img src=&#34;https://mi0034.icu/p/frp%E5%86%85%E7%BD%91%E7%A9%BF%E9%80%8F/attachment/9f194b2edfe6f5e3afb261dd1dd53ce7.jpeg&#34;
	width=&#34;1619&#34;
	height=&#34;1195&#34;
	srcset=&#34;https://mi0034.icu/p/frp%E5%86%85%E7%BD%91%E7%A9%BF%E9%80%8F/attachment/9f194b2edfe6f5e3afb261dd1dd53ce7_hu14825306123420665060.jpeg 480w, https://mi0034.icu/p/frp%E5%86%85%E7%BD%91%E7%A9%BF%E9%80%8F/attachment/9f194b2edfe6f5e3afb261dd1dd53ce7_hu13924638639041465216.jpeg 1024w&#34;
	loading=&#34;lazy&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;135&#34;
		data-flex-basis=&#34;325px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;| 配置服务端，留给靶机二连接
&lt;img src=&#34;https://mi0034.icu/p/frp%E5%86%85%E7%BD%91%E7%A9%BF%E9%80%8F/attachment/414a71d60a205f6163e70d48fd0faeef.jpeg&#34;
	width=&#34;1612&#34;
	height=&#34;1172&#34;
	srcset=&#34;https://mi0034.icu/p/frp%E5%86%85%E7%BD%91%E7%A9%BF%E9%80%8F/attachment/414a71d60a205f6163e70d48fd0faeef_hu17618227990254953307.jpeg 480w, https://mi0034.icu/p/frp%E5%86%85%E7%BD%91%E7%A9%BF%E9%80%8F/attachment/414a71d60a205f6163e70d48fd0faeef_hu2022464780138505224.jpeg 1024w&#34;
	loading=&#34;lazy&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;137&#34;
		data-flex-basis=&#34;330px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;靶机一配置：
| 客户端配置
&lt;img src=&#34;https://mi0034.icu/p/frp%E5%86%85%E7%BD%91%E7%A9%BF%E9%80%8F/attachment/9b2b0420d753946512121fd235c66adb.jpeg&#34;
	width=&#34;1617&#34;
	height=&#34;1204&#34;
	srcset=&#34;https://mi0034.icu/p/frp%E5%86%85%E7%BD%91%E7%A9%BF%E9%80%8F/attachment/9b2b0420d753946512121fd235c66adb_hu7386432810571717148.jpeg 480w, https://mi0034.icu/p/frp%E5%86%85%E7%BD%91%E7%A9%BF%E9%80%8F/attachment/9b2b0420d753946512121fd235c66adb_hu9268802561200403804.jpeg 1024w&#34;
	loading=&#34;lazy&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;134&#34;
		data-flex-basis=&#34;322px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;公网服务端配置：将端口在防火墙放开，配置文件添加对应端口&lt;/p&gt;
&lt;h3 id=&#34;0x0402b-连接&#34;&gt;0x04.02.B 连接
&lt;/h3&gt;&lt;hr&gt;
&lt;p&gt;| 启动靶机一的客户端,服务端
&lt;img src=&#34;https://mi0034.icu/p/frp%E5%86%85%E7%BD%91%E7%A9%BF%E9%80%8F/attachment/c4f33e2c070640195bd91613e65c8f28.jpeg&#34;
	width=&#34;1621&#34;
	height=&#34;214&#34;
	srcset=&#34;https://mi0034.icu/p/frp%E5%86%85%E7%BD%91%E7%A9%BF%E9%80%8F/attachment/c4f33e2c070640195bd91613e65c8f28_hu8069797012060632293.jpeg 480w, https://mi0034.icu/p/frp%E5%86%85%E7%BD%91%E7%A9%BF%E9%80%8F/attachment/c4f33e2c070640195bd91613e65c8f28_hu6869845524909284441.jpeg 1024w&#34;
	loading=&#34;lazy&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;757&#34;
		data-flex-basis=&#34;1817px&#34;
	
&gt;
&lt;img src=&#34;https://mi0034.icu/p/frp%E5%86%85%E7%BD%91%E7%A9%BF%E9%80%8F/attachment/b49f075201adc8fc52ad3bc80fb0d0f5.jpeg&#34;
	width=&#34;1238&#34;
	height=&#34;318&#34;
	srcset=&#34;https://mi0034.icu/p/frp%E5%86%85%E7%BD%91%E7%A9%BF%E9%80%8F/attachment/b49f075201adc8fc52ad3bc80fb0d0f5_hu11299753884591950655.jpeg 480w, https://mi0034.icu/p/frp%E5%86%85%E7%BD%91%E7%A9%BF%E9%80%8F/attachment/b49f075201adc8fc52ad3bc80fb0d0f5_hu15073755134195090533.jpeg 1024w&#34;
	loading=&#34;lazy&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;389&#34;
		data-flex-basis=&#34;934px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;| 启动靶机二的客户端
&lt;img src=&#34;https://mi0034.icu/p/frp%E5%86%85%E7%BD%91%E7%A9%BF%E9%80%8F/attachment/7c08138a82a6ce22a2f6bde92669a6a4.jpeg&#34;
	width=&#34;1621&#34;
	height=&#34;368&#34;
	srcset=&#34;https://mi0034.icu/p/frp%E5%86%85%E7%BD%91%E7%A9%BF%E9%80%8F/attachment/7c08138a82a6ce22a2f6bde92669a6a4_hu1840285670902660960.jpeg 480w, https://mi0034.icu/p/frp%E5%86%85%E7%BD%91%E7%A9%BF%E9%80%8F/attachment/7c08138a82a6ce22a2f6bde92669a6a4_hu17330434117846178510.jpeg 1024w&#34;
	loading=&#34;lazy&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;440&#34;
		data-flex-basis=&#34;1057px&#34;
	
&gt;
查看靶机一日志
&lt;img src=&#34;https://mi0034.icu/p/frp%E5%86%85%E7%BD%91%E7%A9%BF%E9%80%8F/attachment/de3961a590a2569d197f87674a807a81.jpeg&#34;
	width=&#34;1614&#34;
	height=&#34;135&#34;
	srcset=&#34;https://mi0034.icu/p/frp%E5%86%85%E7%BD%91%E7%A9%BF%E9%80%8F/attachment/de3961a590a2569d197f87674a807a81_hu9325788249849925856.jpeg 480w, https://mi0034.icu/p/frp%E5%86%85%E7%BD%91%E7%A9%BF%E9%80%8F/attachment/de3961a590a2569d197f87674a807a81_hu17324411660983475349.jpeg 1024w&#34;
	loading=&#34;lazy&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;1195&#34;
		data-flex-basis=&#34;2869px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;| 使用公网地址连接
&lt;img src=&#34;https://mi0034.icu/p/frp%E5%86%85%E7%BD%91%E7%A9%BF%E9%80%8F/attachment/a37b4397e0d0c921c339755041bea1e6.jpeg&#34;
	width=&#34;1850&#34;
	height=&#34;954&#34;
	srcset=&#34;https://mi0034.icu/p/frp%E5%86%85%E7%BD%91%E7%A9%BF%E9%80%8F/attachment/a37b4397e0d0c921c339755041bea1e6_hu2317533328444787185.jpeg 480w, https://mi0034.icu/p/frp%E5%86%85%E7%BD%91%E7%A9%BF%E9%80%8F/attachment/a37b4397e0d0c921c339755041bea1e6_hu16892105052428887444.jpeg 1024w&#34;
	loading=&#34;lazy&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;193&#34;
		data-flex-basis=&#34;465px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;连接成功，执行命令&lt;/p&gt;
&lt;h1 id=&#34;0x05-拓展_二层代理实操_2&#34;&gt;0x05 拓展_二层代理实操_2
&lt;/h1&gt;&lt;h2 id=&#34;0x0401-环境准备-1&#34;&gt;0x04.01 环境准备
&lt;/h2&gt;&lt;hr&gt;
&lt;blockquote&gt;
&lt;p&gt;[!tip] 内网两台主机需要互通&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3 id=&#34;0x0401a-实验环境&#34;&gt;0x04.01.A 实验环境
&lt;/h3&gt;&lt;hr&gt;
&lt;ol&gt;
&lt;li&gt;攻击机 (kali)&lt;/li&gt;
&lt;li&gt;公网服务器&lt;/li&gt;
&lt;li&gt;内网靶机一（出网，已攻陷）192.168.0.2|10.0.0.3&lt;/li&gt;
&lt;li&gt;内网靶机二（不出网）10.0.0.2&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;实验流程：靶机一是双网卡主机联通两个网段，靶机二不出网，并设置有数据库&lt;/p&gt;
&lt;h3 id=&#34;0x0401b-配置&#34;&gt;0x04.01.B 配置
&lt;/h3&gt;&lt;hr&gt;
&lt;blockquote&gt;
&lt;p&gt;[!tip] 此次实验环境使用 docker 配置&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;strong&gt;Docker：&lt;/strong&gt;
目录结构：
project/
├── docker-compose.yml
├── Dockerfile.First_layer
├── Dockerfile.Second_layer
├── init.sql&lt;/p&gt;
&lt;p&gt;运行命令：&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# 启动!！&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;docker compose up -d
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# 查看状态&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;docker ps
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;配置内容：&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;14
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;15
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;16
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;17
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;18
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;19
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;20
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;21
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;22
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;23
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;24
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;25
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;26
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;27
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;28
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;29
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;30
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;31
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;32
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;33
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;34
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;35
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;36
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;37
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;38
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;39
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;40
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;41
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;42
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;43
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;44
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;45
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;46
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;47
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;48
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;49
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;50
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# docker-compose.yml &lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;version: &lt;span class=&#34;s1&#34;&gt;&amp;#39;3.8&amp;#39;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;services:
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  first_layer:
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    build: 
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;      context: .
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;      dockerfile: Dockerfile.first_layer
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    container_name: first_layer
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    tty: &lt;span class=&#34;nb&#34;&gt;true&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    stdin_open: &lt;span class=&#34;nb&#34;&gt;true&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    networks:
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;      external_net:
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        ipv4_address: 192.168.0.2
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;      internal_net:
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        aliases:
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;          - first_layer
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    ports:
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;      - &lt;span class=&#34;s2&#34;&gt;&amp;#34;2222:22&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  second_layer:
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    build: 
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;      context: .
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;      dockerfile: Dockerfile.second_layer
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    container_name: second_layer
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    tty: &lt;span class=&#34;nb&#34;&gt;true&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    stdin_open: &lt;span class=&#34;nb&#34;&gt;true&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    networks:
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;      internal_net:
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        ipv4_address: 10.0.0.2
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    environment:
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;      MYSQL_ROOT_PASSWORD: root@123
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;volumes:
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  mysql_data:
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;networks:
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  external_net:
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    driver: bridge
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    ipam:
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;      driver: default
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;      config:
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        - subnet: 192.168.0.0/24
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  internal_net:
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    driver: bridge
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    ipam:
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;      driver: default
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;      config:
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        - subnet: 10.0.0.0/24
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;14
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;15
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# Dockerfile.first_layer&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;FROM ubuntu:latest
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;RUN apt-get update &lt;span class=&#34;o&#34;&gt;&amp;amp;&amp;amp;&lt;/span&gt; apt-get install -y wget openssh-server
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;RUN wget https://github.com/fatedier/frp/releases/download/v0.38.0/frp_0.38.0_linux_amd64.tar.gz &lt;span class=&#34;o&#34;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&#34;se&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;se&#34;&gt;&lt;/span&gt;    tar -zxvf frp_0.38.0_linux_amd64.tar.gz &lt;span class=&#34;o&#34;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&#34;se&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;se&#34;&gt;&lt;/span&gt;    mv frp_0.38.0_linux_amd64/frp /usr/local/bin/ &lt;span class=&#34;o&#34;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&#34;se&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;se&#34;&gt;&lt;/span&gt;    rm -rf frp_0.38.0_linux_amd64.tar.gz frp_0.38.0_linux_amd64
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# SSH配置&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;RUN mkdir /var/run/sshd
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;RUN &lt;span class=&#34;nb&#34;&gt;echo&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;root:root&amp;#39;&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;|&lt;/span&gt; chpasswd
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;RUN sed -i &lt;span class=&#34;s1&#34;&gt;&amp;#39;s/#PermitRootLogin prohibit-password/PermitRootLogin yes/&amp;#39;&lt;/span&gt; /etc/ssh/sshd_config
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# SSH登录修复&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;RUN sed -i &lt;span class=&#34;s1&#34;&gt;&amp;#39;s@session\s*required\s*pam_loginuid.so@session optional pam_loginuid.so@g&amp;#39;&lt;/span&gt; /etc/pam.d/sshd
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;EXPOSE &lt;span class=&#34;m&#34;&gt;22&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;CMD &lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;/usr/sbin/sshd&amp;#34;&lt;/span&gt;, &lt;span class=&#34;s2&#34;&gt;&amp;#34;-D&amp;#34;&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# Dockerfile.second_layer&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;FROM ubuntu:latest
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;RUN apt-get update &lt;span class=&#34;o&#34;&gt;&amp;amp;&amp;amp;&lt;/span&gt; apt-get install -y mysql-server wget
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;RUN wget https://github.com/fatedier/frp/releases/download/v0.38.0/frp_0.38.0_linux_amd64.tar.gz &lt;span class=&#34;o&#34;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&#34;se&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;se&#34;&gt;&lt;/span&gt;    tar -zxvf frp_0.38.0_linux_amd64.tar.gz &lt;span class=&#34;o&#34;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&#34;se&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;se&#34;&gt;&lt;/span&gt;    mv frp_0.38.0_linux_amd64/frp /usr/local/bin/ &lt;span class=&#34;o&#34;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&#34;se&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;se&#34;&gt;&lt;/span&gt;    rm -rf frp_0.38.0_linux_amd64.tar.gz frp_0.38.0_linux_amd64
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# MySQL配置&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;ENV &lt;span class=&#34;nv&#34;&gt;MYSQL_ROOT_PASSWORD&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;root@123
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;COPY init.sql /docker-entrypoint-initdb.d/
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;EXPOSE &lt;span class=&#34;m&#34;&gt;3306&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;CMD &lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;mysqld&amp;#34;&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# init.sql&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;CREATE DATABASE IF NOT EXISTS exampledb&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;GRANT ALL PRIVILEGES ON exampledb.* TO &lt;span class=&#34;s1&#34;&gt;&amp;#39;exampleuser&amp;#39;&lt;/span&gt;@&lt;span class=&#34;s1&#34;&gt;&amp;#39;%&amp;#39;&lt;/span&gt; IDENTIFIED BY &lt;span class=&#34;s1&#34;&gt;&amp;#39;examplepassword&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;FLUSH PRIVILEGES&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;&lt;img src=&#34;https://mi0034.icu/p/frp%E5%86%85%E7%BD%91%E7%A9%BF%E9%80%8F/attachment/d2c389e033dc6c6bc915ba88fc78d3a1.jpeg&#34;
	width=&#34;1853&#34;
	height=&#34;203&#34;
	srcset=&#34;https://mi0034.icu/p/frp%E5%86%85%E7%BD%91%E7%A9%BF%E9%80%8F/attachment/d2c389e033dc6c6bc915ba88fc78d3a1_hu8008940952384053939.jpeg 480w, https://mi0034.icu/p/frp%E5%86%85%E7%BD%91%E7%A9%BF%E9%80%8F/attachment/d2c389e033dc6c6bc915ba88fc78d3a1_hu16042325639454203156.jpeg 1024w&#34;
	loading=&#34;lazy&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;912&#34;
		data-flex-basis=&#34;2190px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;frp:&lt;/strong&gt;
ssh 连接：
&lt;img src=&#34;https://mi0034.icu/p/frp%E5%86%85%E7%BD%91%E7%A9%BF%E9%80%8F/attachment/a9865eefad060fc71470f4c1b0411b94.jpeg&#34;
	width=&#34;1850&#34;
	height=&#34;954&#34;
	srcset=&#34;https://mi0034.icu/p/frp%E5%86%85%E7%BD%91%E7%A9%BF%E9%80%8F/attachment/a9865eefad060fc71470f4c1b0411b94_hu5081155343398985298.jpeg 480w, https://mi0034.icu/p/frp%E5%86%85%E7%BD%91%E7%A9%BF%E9%80%8F/attachment/a9865eefad060fc71470f4c1b0411b94_hu10425620147294109536.jpeg 1024w&#34;
	loading=&#34;lazy&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;193&#34;
		data-flex-basis=&#34;465px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;查看网卡信息：
&lt;img src=&#34;https://mi0034.icu/p/frp%E5%86%85%E7%BD%91%E7%A9%BF%E9%80%8F/attachment/797d122657a86d6c275ca41a54d1b45d.jpeg&#34;
	width=&#34;1850&#34;
	height=&#34;954&#34;
	srcset=&#34;https://mi0034.icu/p/frp%E5%86%85%E7%BD%91%E7%A9%BF%E9%80%8F/attachment/797d122657a86d6c275ca41a54d1b45d_hu13391418708645146337.jpeg 480w, https://mi0034.icu/p/frp%E5%86%85%E7%BD%91%E7%A9%BF%E9%80%8F/attachment/797d122657a86d6c275ca41a54d1b45d_hu13940860392452240571.jpeg 1024w&#34;
	loading=&#34;lazy&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;193&#34;
		data-flex-basis=&#34;465px&#34;
	
&gt;
&lt;img src=&#34;https://mi0034.icu/p/frp%E5%86%85%E7%BD%91%E7%A9%BF%E9%80%8F/attachment/89bc16e9ff3599cd555e1a72fde2e2e5.jpeg&#34;
	width=&#34;1850&#34;
	height=&#34;954&#34;
	srcset=&#34;https://mi0034.icu/p/frp%E5%86%85%E7%BD%91%E7%A9%BF%E9%80%8F/attachment/89bc16e9ff3599cd555e1a72fde2e2e5_hu349334906934803144.jpeg 480w, https://mi0034.icu/p/frp%E5%86%85%E7%BD%91%E7%A9%BF%E9%80%8F/attachment/89bc16e9ff3599cd555e1a72fde2e2e5_hu8433017128249423193.jpeg 1024w&#34;
	loading=&#34;lazy&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;193&#34;
		data-flex-basis=&#34;465px&#34;
	
&gt;
可互通：
&lt;img src=&#34;https://mi0034.icu/p/frp%E5%86%85%E7%BD%91%E7%A9%BF%E9%80%8F/attachment/359e0866b4f94c7ec86ff1b060e9ca0b.jpeg&#34;
	width=&#34;1134&#34;
	height=&#34;415&#34;
	srcset=&#34;https://mi0034.icu/p/frp%E5%86%85%E7%BD%91%E7%A9%BF%E9%80%8F/attachment/359e0866b4f94c7ec86ff1b060e9ca0b_hu11001135250687986612.jpeg 480w, https://mi0034.icu/p/frp%E5%86%85%E7%BD%91%E7%A9%BF%E9%80%8F/attachment/359e0866b4f94c7ec86ff1b060e9ca0b_hu3071218541932356118.jpeg 1024w&#34;
	loading=&#34;lazy&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;273&#34;
		data-flex-basis=&#34;655px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;分别配置 frp:
| 靶机 2 客户端
&lt;img src=&#34;https://mi0034.icu/p/frp%E5%86%85%E7%BD%91%E7%A9%BF%E9%80%8F/attachment/b1b1392ab0bb278120ee094ce9fa1946.jpeg&#34;
	width=&#34;1850&#34;
	height=&#34;954&#34;
	srcset=&#34;https://mi0034.icu/p/frp%E5%86%85%E7%BD%91%E7%A9%BF%E9%80%8F/attachment/b1b1392ab0bb278120ee094ce9fa1946_hu13524057122015464249.jpeg 480w, https://mi0034.icu/p/frp%E5%86%85%E7%BD%91%E7%A9%BF%E9%80%8F/attachment/b1b1392ab0bb278120ee094ce9fa1946_hu11771469096471020467.jpeg 1024w&#34;
	loading=&#34;lazy&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;193&#34;
		data-flex-basis=&#34;465px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;| 靶机 1 客户端/服务端
&lt;img src=&#34;https://mi0034.icu/p/frp%E5%86%85%E7%BD%91%E7%A9%BF%E9%80%8F/attachment/2464c27b001870ca15d96b46d7a87b10.jpeg&#34;
	width=&#34;1850&#34;
	height=&#34;954&#34;
	srcset=&#34;https://mi0034.icu/p/frp%E5%86%85%E7%BD%91%E7%A9%BF%E9%80%8F/attachment/2464c27b001870ca15d96b46d7a87b10_hu1798310226990057097.jpeg 480w, https://mi0034.icu/p/frp%E5%86%85%E7%BD%91%E7%A9%BF%E9%80%8F/attachment/2464c27b001870ca15d96b46d7a87b10_hu15759404697047738720.jpeg 1024w&#34;
	loading=&#34;lazy&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;193&#34;
		data-flex-basis=&#34;465px&#34;
	
&gt;
&lt;img src=&#34;https://mi0034.icu/p/frp%E5%86%85%E7%BD%91%E7%A9%BF%E9%80%8F/attachment/b7e9d9cb236fb7d8489c48f1cd768793.jpeg&#34;
	width=&#34;1850&#34;
	height=&#34;954&#34;
	srcset=&#34;https://mi0034.icu/p/frp%E5%86%85%E7%BD%91%E7%A9%BF%E9%80%8F/attachment/b7e9d9cb236fb7d8489c48f1cd768793_hu9851492831637391192.jpeg 480w, https://mi0034.icu/p/frp%E5%86%85%E7%BD%91%E7%A9%BF%E9%80%8F/attachment/b7e9d9cb236fb7d8489c48f1cd768793_hu10926267436014805468.jpeg 1024w&#34;
	loading=&#34;lazy&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;193&#34;
		data-flex-basis=&#34;465px&#34;
	
&gt;&lt;/p&gt;
&lt;h2 id=&#34;0x0402-实验过程-1&#34;&gt;0x04.02 实验过程
&lt;/h2&gt;&lt;hr&gt;
&lt;h3 id=&#34;0x0402a-连接数据库&#34;&gt;0x04.02.A 连接数据库
&lt;/h3&gt;&lt;p&gt;&lt;img src=&#34;https://mi0034.icu/p/frp%E5%86%85%E7%BD%91%E7%A9%BF%E9%80%8F/attachment/1f539009c440270c76cf4f9191c94950.jpeg&#34;
	width=&#34;1173&#34;
	height=&#34;1033&#34;
	srcset=&#34;https://mi0034.icu/p/frp%E5%86%85%E7%BD%91%E7%A9%BF%E9%80%8F/attachment/1f539009c440270c76cf4f9191c94950_hu10803471062423899574.jpeg 480w, https://mi0034.icu/p/frp%E5%86%85%E7%BD%91%E7%A9%BF%E9%80%8F/attachment/1f539009c440270c76cf4f9191c94950_hu10920984181234317751.jpeg 1024w&#34;
	loading=&#34;lazy&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;113&#34;
		data-flex-basis=&#34;272px&#34;
	
&gt;&lt;/p&gt;
</description>
        </item>
        
    </channel>
</rss>
